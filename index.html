<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>BDD-Test Fest</title>

  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/reveal.css">
  <link rel="stylesheet" href="css/theme/black.css">
  <link rel="stylesheet" href="css/custom/custom.css">
  <link rel="stylesheet" href="css/custom/presentation_detail.css">

  <!-- Theme used for syntax highlighting of code -->
  <link rel="stylesheet" href="lib/css/monokai.css">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <!-- Printing and PDF exports -->
  <script>
	var link = document.createElement( 'link' );
	link.rel = 'stylesheet';
	link.type = 'text/css';
	link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
	document.getElementsByTagName( 'head' )[0].appendChild( link );

  </script>
</head>
<body>
<div class="reveal">
  <div class="slides">
    <section class="present">
      <h3>Behave Driven Python</h3>
      <h4>Web application testing with behave</h4>
    </section>
    <section id="about">
      <h1>Who AM I?</h1>
      <ul>
        <li class="fragment grow" data-fragment-index="0"> Python developer</li>
        <li class="fragment grow" data-fragment-index="1"> Scrum Master</li>
        <li class="fragment grow" data-fragment-index="2"> Tech and soft skills trainer</li>
        <li class="fragment grow" data-fragment-index="3"> Creative Mom</li>
        <li class="fragment grow" data-fragment-index="4"> Visual Thinking enthusiast</li>
      </ul>
      <p>
        <a href="https://www.linkedin.com/in/agnieszka-j-malek/" class="fa fa-linkedin"></a>
        <a href="https://twitter.com/Malek_Agnieszka" class="fa fa-twitter"></a>
        <a href="https://www.facebook.com/agnieszka.j.malek" class="fa fa-facebook"></a>
        <a href="https://github.com/Aga-Ma" class="fa fa-github"></a>
      </p>
    </section>
    <section id="agenda">
      <section>
        <h2>What are we going to work on today?</h2>
      </section>
      <section id="1st">
        <h3>BDD - let's grab a little context</h3>
        <ul>
          <li>What is behavior and BDD?</li>
          <li>Benefits of BDD</li>
          <li>Python BDD test frameworks</li>
        </ul>
      </section>
      <section id="2nd">
        <h3>Behave Test Framework</h3>
        <ul>
          <li>Feature files</li>
          <li>Steps implementation</li>
          <li>Context</li>
          <li>Step Data</li>
          <li>Multiline text</li>
          <li>Step parameters</li>
          <li>Scenario outline</li>
          <li>Hooks</li>
          <li>Fixtures</li>
          <li>Tags</li>
        </ul>
      </section>
      <section id="3rd">
        <h3>Summary - put it all together</h3>
        <ul>
          <li>Full example</li>
          <li>Reports generation with Allure</li>
          <li>Practice</li>
        </ul>
      </section>
    </section>
    <section id="goals">
      <h2>Workshop goals</h2>
      <p>After the training:</p>
      <ol>
        <li>You will know the BDD concept and its advantages</li>
        <li>You will know how to work with `behave` framework</li>
        <li>You will be able to create tests based on gained knowledge</li>
      </ol>
    </section>
    <section id="bdd">
      <section>
        <h2>Behavior Driven Development</h2>
      </section>
      <section id="behavior">
        <h2>What is behavior?</h2>
        <p style="text-align:left">Where does TDD fall?</p>
        <ul>
          <li>What to test?</li>
          <li>How much to test?</li>
          <li>How to understand failing tests?</li>
        </ul>
        <p class="fragment" style="text-align:left"> “Behaviour” is a more useful word than “test”</p>
      </section>
      <section id="format">
        <h2>`WHAT` more than `HOW`</h2>
        <p style="text-align:left"><span class="keyword">Given</span> some initial context (the givens),</p>
        <p style="text-align:left"><span class="keyword">When</span> an event occurs,</p>
        <p style="text-align:left"><span class="keyword">Then</span> ensure some outcomes.</p>
        <p style="text-align:left">BDD emphasizes the client's perspective</p>
      </section>
      <section id="definition">
        <h2>What is BDD?</h2>
        <p>BDD is a second-generation, outside-in, pull-based, multiple-stakeholder, multiple-scale,
          high-automation, agile methodology. It describes a cycle of interactions with well-defined outputs,
          resulting in the delivery of working, tested software that matters.</p>
        <a href="https://dannorth.net/introducing-bdd/">Dan North - introducing BDD</a>
      </section>
      <section id="benefits">
        <h2>Benefits</h2>
        <ul>
          <li>Allows everybody involved to write tests not just coders</li>
          <li>Supports collaboration and automation</li>
          <li>It is specification by example</li>
          <li>Encourage thinking about the application in a natural consistent language</li>
          <li>Behavior specs becomes requirements, ACC and acceptance tests (all in one)</li>
          <li>BDD is a refinement of Agile process</li>
        </ul>
      </section>
    </section>
    <section id="frameworks" style="text-align:left">
      <h3>Python BDD test frameworks</h3>
      <ul>
        <li>Behave</li>
        <li>pythest-bdd</li>
        <li>radish</li>
        <li>lettuce</li>
      </ul>
      <br>
      <a href="https://automationpanda.com/2019/04/02/python-bdd-framework-comparison/">Python BDD framework comparison
        - Automation Panda</a>
    </section>
    <section id="installation">
      <h2>Installation</h2>
      <a href="https://github.com/Aga-Ma/behave_workshop/blob/master/installation.md">Aga-Ma/behave_workshop/installation.md</a>
    </section>
    <section id="behave">
      <section>
        <h2>Behave Test Framework</h2>
      </section>
      <section id="structure">
        <h2>Project structure</h2>
      </section>
      <section>
        <img src="img/basicstructure.PNG" alt="basic structure">
        <a href="https://github.com/Aga-Ma/behave_demo/releases/tag/basicstructure">behave_demo/releases/tag/basicstructure</a>
      </section>
    </section>
    <section id="featurefiles">
      <section>
        <h2>Feature Files</h2>
      </section>
      <section id="googlesearch">
        <p>features/google.feature</p>
        <pre>
          <code class="hljs gherkin" data-line-numbers="1,6-9">Feature: Google search
  As a user
  I'd like to search for some phrase
  to get new information about it

Scenario:  a user can search for a phrase
  Given a user visit google
  When the user searches for the phrase
  Then one of the results contains expected result
          </code>
        </pre>
        <a href="https://github.com/Aga-Ma/behave_demo/releases/tag/featurefile">behave_demo/releases/tag/featurefile</a>
      </section>
      <section id="run">
        <p>Let's finally run it!</p>
        <img src="img/featurerun.png" alt="no steps directory error">
        <p class="fragment">...and now let's fix it</p>
      </section>
    </section>
    <section id="python">
      <h2>Python comes into play</h2>
    </section>
    <section id="selenium">
      <section>
        <h2>UI testing with Selenium</h2>
      </section>
      <section id="pom">
        <h3>Page Object Model</h3>
      </section>
      <section>
        <img src="img/pomstructure.PNG" alt="pom structure"><br>
        <a href="https://github.com/Aga-Ma/behave_demo/releases/tag/pom">behave_demo/releases/tag/pom</a>
      </section>
      <section id="basepage">
        <p>features/steps/pages/BasePage.py</p>
        <pre>
          <code class="hljs python">class BasePage(object):

    def __init__(self, driver):
        self.driver = driver
        self.timeout = 30

    def find_element(self, *loc):
        return self.driver.find_element(*loc)

    def load(self, url):
        self.driver.get(url)
          </code>
        </pre>
      </section>
      <section id="searchpage">
        <p>features/steps/pages/SearchPage.py</p>
        <pre>
          <code class="hljs python">from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys

from .BasePage import BasePage


class SearchPage(BasePage):

    SEARCH_INPUT = (By.XPATH, "//input[@name='q']")

    def __init__(self, context):
        super().__init__(context.driver)

    def search(self, phrase):
        search_input = self.driver.find_element(*self.SEARCH_INPUT)
        search_input.send_keys(phrase + Keys.RETURN)
          </code>
        </pre>
      </section>
      <section id="resultspage">
        <p>features/steps/pages/ResultsPage.py</p>
        <pre>
          <code class="hljs python">from selenium.webdriver.common.by import By

from .BasePage import BasePage


class ResultPage(BasePage):

    @classmethod
    def phrase_results(cls, phrase):
        xpath = f"//*[contains(text(), '{phrase}')]"
        return By.XPATH, xpath

    def __init__(self, context):
        super().__init__(context.driver)

    def phrase_result_count(self, phrase):
        phrase_results = self.driver.find_elements(*self.phrase_results(phrase))
        return len(phrase_results)
          </code>
        </pre>
      </section>
    </section>
    <section id="context">
      <h2>Context</h2>
    </section>
    <section id="steps">
      <section id="stepimpl">
        <h2>Steps implementation</h2>
      </section>
      <section id="behavesearch">
        <p>First let's maybe look for something meaningful</p>
        <p>features/google.feature</p>
        <pre><code class="hljs gherkin" data-line-numbers="8,9">Feature: Google search
    As a user
    I'd like to search for some phrase
    to get new information about it

  Scenario:  a user can search for a phrase
    Given a user visit google
    When the user searches for the behave python phrase
    Then one of the results contains: Welcome to behave
          </code>
        </pre>
      </section>
      <section id="definitions">
        <p>features/steps/googlesearch.py</p>
        <pre>
          <code class="hljs python">from behave import given, when, then
from selenium import webdriver

from features.steps.pages import *


@given('a user visit google')
def step_impl(context):
    context.driver = webdriver.Chrome("C:/drivers/chromedriver.exe")
    page = SearchPage(context)
    page.load('http://www.google.com')


@when('the user searches for the behave python phrase')
def step_impl(context):
    page = SearchPage(context)
    page.search('behave python')


@then('one of the results contains: Welcome to behave')
def step_impl(context):
    page = ResultPage(context)
    results = page.phrase_result_count('Welcome to behave')
    context.driver.quit()
    assert results > 0
          </code>
        </pre>
      </section>
      <section id="dryrun">
        <p style="text-align:left">Let's do some precheck with 'behave --dry-run'</p>
        <img src="img/dryrun.PNG" alt="dryrun">
        <p class="fragment" style="text-align:left">Looks promising. Doesn't it?<br>
          <a href="https://github.com/Aga-Ma/behave_demo/releases/tag/steps">behave_demo/releases/tag/steps</a></p>
      </section>
      <section>
        <h2>And run!</h2>
        <img src="img/firstrun.PNG" alt="run status">
      </section>
      <section id="stepparameters">
        <h2>Step Parameters</h2>
      </section>
      <section id="scenarioparameters">
        <p>features/google.feature</p>
        <pre><code class="hljs gherkin" data-line-numbers="1,6-9">Feature: Google search
  As a user
  I'd like to search for some phrase
  to get new information about it

  Scenario:  a user can search for a phrase
    Given a user visit google
    When the user searches for the "behave python" phrase
    Then one of the results contains: "Welcome to behave"
          </code>
        </pre>
      </section>
      <section id="refactor">
        <p>features/steps/googlesearch.py</p>
          <code class="hljs python">from behave import given, when, then
from selenium import webdriver

from features.steps.pages import *


@given('a user visit google')
def step_impl(context):
    context.driver = webdriver.Chrome("C:/drivers/chromedriver.exe")
    page = SearchPage(context)
    page.load('http://www.google.com')


@when('the user searches for the "{search}" phrase')
def step_impl(context, search):
    page = SearchPage(context)
    page.search(search)


@then('one of the results contains: "{expected_result}"')
def step_impl(context, expected_result):
    page = ResultPage(context)
    results = page.phrase_result_count(expected_result)
    context.driver.quit()
    assert results > 0
          </code>
        <a href="https://github.com/Aga-Ma/behave_demo/releases/tag/stepparameters">behave_demo/releases/tag/stepparameters</a>
      </section>
    </section>
    <section id="environment">
      <section id="hooks">
        <h2>Hooks</h2>
      </section>
      <section>
        <p>features/steps/googlesearch.py</p><pre>
          <code class="hljs python" data-line-numbers="3,12">@given('a user visit google')
def step_impl(context):
    context.driver = webdriver.Chrome("C:/drivers/chromedriver.exe")
    page = SearchPage(context)
    page.load('http://www.google.com')


@then('one of the results contains: "{expected_result}"')
def step_impl(context, expected_result):
    page = ResultPage(context)
    results = page.phrase_result_count(expected_result)
    context.driver.quit()
    assert results > 0
          </code>
        </pre>
      </section>
      <section>
        <p>features/steps/googlesearch.py</p>
        <pre>
          <code class="hljs python">from behave import given, when, then

from features.steps.pages import *


@given('a user visit google')
def step_impl(context):
    page = SearchPage(context)
    page.load('http://www.google.com')


@when('the user searches for the "{search}" phrase')
def step_impl(context, search):
    page = SearchPage(context)
    page.search(search)


@then('one of the results contains: "{expected_result}"')
def step_impl(context, expected_result):
    page = ResultPage(context)
    results = page.phrase_result_count(expected_result)
    assert results > 0
          </code>
        </pre>
      </section>
      <section>
        <p>features/environment.py</p>
        <pre>
          <code class="hljs python">from selenium import webdriver


def before_scenario(context, scenario):
    context.driver = webdriver.Chrome("C:/drivers/chromedriver.exe")
    context.driver.implicitly_wait(10)


def after_scenario(context, scenario):
    context.driver.quit()
          </code>
        </pre>
        <a href="https://github.com/Aga-Ma/behave_demo/releases/tag/hooks">behave_demo/releases/tag/hooks</a>
      </section>
      <section id="fixtures">
        <h2>Fixtures</h2>
      </section>
      <section>
        <p>features/fixtures.py</p>
        <pre>
          <code class="hljs python">from selenium import webdriver
from behave.fixture import fixture


@fixture
def browser_chrome(context):
    context.driver = webdriver.Chrome("C:/drivers/chromedriver.exe")
    context.driver.implicitly_wait(10)
    yield context.driver
    context.driver.quit()
          </code>
        </pre>
      </section>
      <section>
        <p>features/environment.py</p>
        <pre>
          <code class="hljs python">from behave import use_fixture

from fixtures import browser_chrome


def before_tag(context, tag):
    if tag == "fixture.browser.chrome":
        use_fixture(browser_chrome, context)
          </code>
        </pre>
      </section>
      <section>
        <p>features/googlesearch.feature</p>
        <pre>
          <code class="hljs gherkin">@fixture.browser.chrome
Feature: Google search
  As a user
  I'd like to search for some phrase
  to get new information about it

  Scenario:  a user can search for a phrase
    Given a user visit google
    When the user searches for the "behave python" phrase
    Then one of the results contains: "Welcome to behave"
          </code>
        </pre>
        <a href="https://github.com/Aga-Ma/behave_demo/releases/tag/fixtures">behave_demo/releases/tag/fixtures</a>
      </section>
    </section>
    <section id="stepdata">
      <section>
        <h2>Step Data</h2>
      </section>
      <section id="multilinetext">
        <h2>Multiline text</h2>
      </section>
      <section id="datatables">
        <h2>Tables of data</h2>
      </section>
      <section id="nestedstep">
        <h2>Execute step in a step</h2>
      </section>
    </section>
    <section id="scenariooutline">
      <h2>Scenario Outline</h2>
    </section>
    <section id="tags">
      <h2>Tags</h2>
    </section>
    <section id="summary">
      <section id="sum">
        <h2>Summary</h2>
      </section>
      <section id="demo">
        <h2>The DuckDuckGo example</h2>
      </section>
      <section id="report">
        <h2>Report generation</h2>
      </section>
      <section id="debug">
        <h2>Debugging</h2>
      </section>
    </section>
    <section id="practice">
      <section>
        <h2>Practice</h2>
      </section>
      <section id="git">
        <a href="https://github.com/Aga-Ma"><img class="avatar" src="img/agama.png" alt="Avatar"></a><br>
        <a href="https://github.com/Aga-Ma/behave_workshop">https://github.com/Aga-Ma/behave_workshop</a>
      </section>
    </section>
  </div>
</div>
<div class="presentation-details">
  <p>
    Behave Driven Python • <a href="https://testfest.pl/speaker/agnieszka-malek/">TestFest</a> 29.02.2020 • Agnieszka
    Malek
  </p>
</div>

<script src="js/reveal.js"></script>

<script>
	// More info about config & dependencies:
	// - https://github.com/hakimel/reveal.js#configuration
	// - https://github.com/hakimel/reveal.js#dependencies
	Reveal.initialize({
		hash: true,
		dependencies: [
			{ src: 'plugin/markdown/marked.js' },
			{ src: 'plugin/markdown/markdown.js' },
			{ src: 'plugin/highlight/highlight.js' },
			{ src: 'plugin/notes/notes.js', async: true }
		],
		slideNumber: true,
	});

</script>
</body>
</html>
